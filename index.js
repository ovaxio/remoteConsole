// Generated by CoffeeScript 1.7.1
(function() {
  var RemoteConsole, request,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  request = require('superagent');

  RemoteConsole = (function() {
    function RemoteConsole(server) {
      this.server = server;
      this.sendError = __bind(this.sendError, this);
      if (this.server != null) {
        window.onerror = this.sendError;
      }
    }

    RemoteConsole.prototype.sendError = function(e, url, l) {
      var data;
      data = {
        error: {
          msg: e,
          file: url,
          line: l
        },
        browser: this.getNavigatorData(),
        window: this.getWindowData()
      };
      return request.get(this.server).query(JSON.stringify(data)).end(function() {});
    };

    RemoteConsole.prototype.getWindowData = function() {
      return {
        innerHeight: window.innerHeight,
        innerWidth: window.innerWidth
      };
    };

    RemoteConsole.prototype.getNavigatorData = function() {
      return {
        appCodeName: navigator.appCodeName,
        appName: navigator.appName,
        appVersion: navigator.appVersion,
        platform: navigator.platform,
        userAgent: navigator.userAgent,
        vendor: navigator.vendor
      };
    };

    return RemoteConsole;

  })();

  module.exports = RemoteConsole;

}).call(this);
